/* ============================================
   CHARACTER DETAILS VIEW - Draw Steel Banner Frame Style
   ============================================ */

/* === DESIGN TOKENS === */
:root {
  --ds-corner-radius: 8px;
  --ds-header-height: 36px;
  --ds-chevron-width: 24px;
  --ds-chevron-depth: 10px;
  --ds-border-color: #3a3a3a;
  --ds-border-width: 1px;
  --ds-section-bg: var(--bg-card, #1a1a1a);
  --ds-header-bg: var(--bg-darkest, #141414);
}

/* === GRID LAYOUT === */
.character-details-view {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
}

/* ============================================
   SECTION FRAME - Base Banner Style
   ============================================ */

.details-section {
  position: relative;
  background: var(--ds-section-bg);
  border: var(--ds-border-width) solid var(--ds-border-color);
  border-radius: var(--ds-corner-radius);
  overflow: hidden;
}

/* === SECTION HEADER WITH CHEVRON === */
.details-section h2 {
  position: relative;
  margin: 0;
  padding: 0.6rem 1rem;
  padding-bottom: calc(0.6rem + var(--ds-chevron-depth));
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  text-align: center;
  background: var(--ds-header-bg);
  border-bottom: var(--ds-border-width) solid var(--ds-border-color);
}

/* Chevron notch below header text */
.details-section h2::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: calc(var(--ds-chevron-width) / 2) solid transparent;
  border-right: calc(var(--ds-chevron-width) / 2) solid transparent;
  border-top: var(--ds-chevron-depth) solid var(--ds-header-bg);
  z-index: 2;
}

/* Separator line positioned above chevron */
.details-section h2::before {
  content: '';
  position: absolute;
  bottom: var(--ds-chevron-depth);
  left: 0;
  right: 0;
  height: var(--ds-border-width);
  background: var(--ds-border-color);
  z-index: 1;
}

/* === SECTION CONTENT AREA === */
.details-section .section-content {
  padding: 1rem;
}

/* Legacy content area (for existing structure) */
.details-section > *:not(h2) {
  padding: 0 1rem;
}

.details-section > *:last-child {
  padding-bottom: 1rem;
}

.details-section > h2 + * {
  padding-top: 1rem;
}

/* === SECTION H4 SUBHEADERS === */
.details-section h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-secondary, #b8b8b0);
}

/* === DESCRIPTION TEXT === */
.description {
  color: var(--text-muted, #888);
  font-style: italic;
  margin-bottom: 1rem;
  line-height: 1.5;
  font-size: 0.85rem;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* ============================================
   ANCESTRY SECTION - Golden Accent
   ============================================ */

.ancestry-section h2 {
  color: #f0c674;
}

.ancestry-section h2::after {
  border-top-color: var(--ds-header-bg);
}

.ancestry-stats {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
  padding: 0 1rem;
}

.ancestry-stats .stat {
  background: rgba(240, 198, 116, 0.1);
  padding: 0.4rem 0.8rem;
  border-radius: 4px;
  color: #f0c674;
  font-weight: 500;
  font-size: 0.85rem;
  border: 1px solid rgba(240, 198, 116, 0.2);
}

.feature-block {
  margin: 0 1rem 1rem 1rem;
  padding: 0.75rem;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}

.feature-block.signature {
  border-left: 3px solid #f0c674;
}

.feature-block.purchased {
  border-left: 3px solid var(--color-success, #4de8b2);
}

.feature-block h4 {
  margin: 0 0 0.5rem 0;
  color: #f0c674;
}

.feature {
  margin-bottom: 0.5rem;
}

.feature strong {
  color: #f0c674;
}

.feature p {
  margin: 0.25rem 0 0 0;
  color: var(--text-secondary, #b8b8b0);
  font-size: 0.85rem;
  line-height: 1.4;
}

.traits-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.trait strong {
  color: var(--color-success, #4de8b2);
}

.trait .cost {
  color: #f0c674;
  margin-left: 0.5rem;
  font-size: 0.8rem;
}

.trait p {
  margin: 0.25rem 0 0 0;
  color: var(--text-muted, #888);
  font-size: 0.85rem;
}

/* ============================================
   CULTURE SECTION - Purple Accent (3-Column Grid)
   ============================================ */

.culture-section h2 {
  color: #ba68c8;
}

.culture-section h4 {
  color: #ba68c8;
}

/* Main grid container */
.culture-details {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
  background: var(--ds-border-color, #3a3a3a);
  margin: 1rem;
  padding: 0;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid var(--ds-border-color, #3a3a3a);
}

/* Individual culture aspect cells - matches skills-block pattern */
.culture-aspect {
  background: var(--ds-section-bg, #1a1a1a);
  padding: 0.75rem;
  min-width: 0; /* Prevent grid blowout from long content */
}

/* Aspect header */
.culture-aspect h4 {
  margin: 0 0 0.4rem 0;
  font-size: 0.8rem;
  font-weight: 600;
  color: #ba68c8;
  line-height: 1.3;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Base paragraph styling */
.culture-aspect p {
  margin: 0;
  color: var(--text-muted, #888);
  font-size: 0.8rem;
  line-height: 1.4;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Description text */
.culture-aspect .aspect-description {
  color: var(--text-secondary, #b8b8b0);
  font-style: italic;
}

/* Skills list */
.culture-aspect .aspect-skills {
  margin-top: 0.4rem;
  color: var(--accent-primary, #4de8b2);
  font-weight: 500;
  font-size: 0.75rem;
  line-height: 1.3;
}

/* Empty state - when aspect is missing */
.culture-aspect--empty {
  opacity: 0.5;
  font-style: italic;
}

/* ============================================
   CAREER SECTION - Orange Accent (2-Column Layout)
   ============================================ */

.career-section h2 {
  color: #ffb74d;
}

.career-section h4 {
  color: #ffb74d;
}

.career-details {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
}

.career-stat {
  background: rgba(0, 0, 0, 0.3);
  padding: 0.4rem 0.8rem;
  border-radius: 4px;
  font-size: 0.85rem;
  border: 1px solid var(--ds-border-color);
}

.career-stat strong {
  color: #ffb74d;
}

.inciting-incident {
  margin: 0 1rem 1rem 1rem;
  padding: 0.75rem;
  background: rgba(255, 183, 77, 0.08);
  border-radius: 4px;
  border-left: 3px solid #ffb74d;
  position: relative;
}

.inciting-incident h4 {
  margin-bottom: 0.5rem;
}

.inciting-incident p {
  margin: 0;
  color: var(--text-secondary, #b8b8b0);
  font-style: italic;
  font-size: 0.9rem;
}

/* ============================================
   SKILLS & LANGUAGES SECTION - Emerald Accent
   ============================================ */

.skills-section h2 {
  color: var(--accent-primary, #4de8b2);
}

.skills-section h4 {
  color: var(--text-secondary, #b8b8b0);
}

.skills-languages-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
  background: var(--ds-border-color);
  margin: 0 1rem 1rem 1rem;
  border-radius: 4px;
  overflow: hidden;
}

.skills-block, .languages-block {
  background: var(--ds-section-bg);
  padding: 0.75rem;
}

.skills-list, .languages-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.skills-list li {
  background: rgba(77, 232, 178, 0.1);
  padding: 0.3rem 0.6rem;
  border-radius: 4px;
  font-size: 0.8rem;
  color: var(--accent-primary, #4de8b2);
  border: 1px solid rgba(77, 232, 178, 0.2);
}

.languages-list li {
  background: rgba(186, 104, 200, 0.1);
  padding: 0.3rem 0.6rem;
  border-radius: 4px;
  font-size: 0.8rem;
  color: #ba68c8;
  border: 1px solid rgba(186, 104, 200, 0.2);
}

/* ============================================
   PERKS SECTION - Golden/Multi-Color Accent
   ============================================ */

/* Category-specific colors */
.perks-section {
  --perk-crafting: #d4a373;
  --perk-exploration: #90be6d;
  --perk-interpersonal: #f9c74f;
  --perk-intrigue: #9381ff;
  --perk-lore: #5fa8d3;
  --perk-supernatural: #e36397;
}

.perks-section h2 {
  color: #f0c674;
}

.perks-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0 1rem;
  margin-bottom: 1rem;
}

.perk-display-card {
  background: var(--bg-darkest, #0a1212);
  border: 1px solid var(--ds-border-color, #3a3a3a);
  border-left: 3px solid #f0c674;
  border-radius: 4px;
  padding: 0.75rem 1rem;
}

/* Category-specific left border colors */
.perk-display-card--crafting {
  border-left-color: var(--perk-crafting);
}
.perk-display-card--exploration {
  border-left-color: var(--perk-exploration);
}
.perk-display-card--interpersonal {
  border-left-color: var(--perk-interpersonal);
}
.perk-display-card--intrigue {
  border-left-color: var(--perk-intrigue);
}
.perk-display-card--lore {
  border-left-color: var(--perk-lore);
}
.perk-display-card--supernatural {
  border-left-color: var(--perk-supernatural);
}

.perk-display-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.perk-display-icon {
  flex-shrink: 0;
  color: var(--text-muted, #707068);
}

.perk-display-card--crafting .perk-display-icon { color: var(--perk-crafting); }
.perk-display-card--exploration .perk-display-icon { color: var(--perk-exploration); }
.perk-display-card--interpersonal .perk-display-icon { color: var(--perk-interpersonal); }
.perk-display-card--intrigue .perk-display-icon { color: var(--perk-intrigue); }
.perk-display-card--lore .perk-display-icon { color: var(--perk-lore); }
.perk-display-card--supernatural .perk-display-icon { color: var(--perk-supernatural); }

.perk-display-name {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary, #f5f5f0);
  flex: 1;
}

.perk-level-badge {
  font-size: 0.65rem;
  padding: 0.15rem 0.4rem;
  background: var(--bg-medium, #1a2525);
  border-radius: 2px;
  color: var(--text-muted, #707068);
}

.perk-display-description {
  margin: 0 0 0.5rem;
  font-size: 0.85rem;
  color: var(--text-secondary, #b8b8b0);
  line-height: 1.4;
}

.perk-category-tag {
  display: inline-block;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.1rem 0.35rem;
  border-radius: 2px;
  background: rgba(240, 198, 116, 0.2);
  color: #f0c674;
}

.perk-display-card--crafting .perk-category-tag {
  background: rgba(212, 163, 115, 0.2);
  color: var(--perk-crafting);
}
.perk-display-card--exploration .perk-category-tag {
  background: rgba(144, 190, 109, 0.2);
  color: var(--perk-exploration);
}
.perk-display-card--interpersonal .perk-category-tag {
  background: rgba(249, 199, 79, 0.2);
  color: var(--perk-interpersonal);
}
.perk-display-card--intrigue .perk-category-tag {
  background: rgba(147, 129, 255, 0.2);
  color: var(--perk-intrigue);
}
.perk-display-card--lore .perk-category-tag {
  background: rgba(95, 168, 211, 0.2);
  color: var(--perk-lore);
}
.perk-display-card--supernatural .perk-category-tag {
  background: rgba(227, 99, 151, 0.2);
  color: var(--perk-supernatural);
}

.perks-section:hover {
  border-color: rgba(240, 198, 116, 0.4);
  box-shadow: 0 0 15px rgba(240, 198, 116, 0.1);
}

/* ============================================
   KIT SECTION - Blue Accent
   ============================================ */

.kit-section h2 {
  color: #90caf9;
}

.kit-section h4 {
  color: #90caf9;
  font-size: 0.8rem;
  margin: 0;
}

/* Stats grid - 4 columns */
.kit-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1px;
  background: var(--ds-border-color, #3a3a3a);
  margin: 0 1rem 0 1rem;
  border-radius: 4px 4px 0 0; /* Rounded top corners only */
  overflow: hidden;
  border: 1px solid var(--ds-border-color, #3a3a3a);
}

/* Individual stat cell */
.kit-stat {
  background: var(--ds-section-bg, #1a1a1a);
  padding: 0.5rem 0.25rem;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 0.15rem;
  min-width: 0; /* Prevent overflow */
}

/* Stat label */
.kit-stat strong {
  display: block;
  color: #90caf9;
  font-size: 0.6rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  line-height: 1.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Stat value */
.kit-stat .stat-value {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-primary, #f5f5f0);
}

/* Equipment container - joins with kit-stats above */
.kit-equipment {
  display: flex;
  flex-direction: column;
  gap: 1px;
  background: var(--ds-border-color, #3a3a3a);
  margin: -1px 1rem 1rem 1rem; /* Negative top margin overlaps with kit-stats border */
  border-radius: 0 0 4px 4px; /* Rounded bottom corners only */
  overflow: hidden;
  border: 1px solid var(--ds-border-color, #3a3a3a);
}

/* Equipment row */
.equipment-block {
  padding: 0.6rem 0.75rem;
  background: var(--ds-section-bg, #1a1a1a);
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  flex-wrap: wrap; /* Allow wrapping for long lists */
  min-width: 0;
}

.equipment-block h4 {
  margin: 0;
  white-space: nowrap;
  font-size: 0.75rem;
  flex-shrink: 0;
}

.equipment-block p {
  margin: 0;
  color: var(--text-secondary, #b8b8b0);
  font-size: 0.85rem;
  line-height: 1.4;
  word-wrap: break-word;
  overflow-wrap: break-word;
  min-width: 0;
  flex: 1;
}

/* Empty equipment block */
.equipment-block--empty {
  opacity: 0.5;
  font-style: italic;
}

/* ============================================
   CIRCLE SECTION - Purple Accent
   ============================================ */

.circle-section h2 {
  color: #ce93d8;
}

.circle-section h4 {
  color: #ce93d8;
}

.circle-info {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  margin-bottom: 1rem;
  padding: 0 1rem;
}

.circle-stat {
  font-size: 0.9rem;
}

.circle-stat strong {
  color: #ce93d8;
}

.formation-info {
  margin: 0 1rem 1rem 1rem;
  padding: 0.75rem;
  background: rgba(156, 39, 176, 0.08);
  border-radius: 4px;
  border: 1px solid rgba(206, 147, 216, 0.2);
}

.formation-info h4 {
  margin: 0 0 0.5rem 0;
}

.quick-command-detail strong {
  color: #f0c674;
}

.quick-command-detail p {
  margin: 0.25rem 0 0 0;
  color: var(--text-muted, #888);
  font-size: 0.85rem;
}

/* ============================================
   FORMATION SELECTOR
   ============================================ */

.formation-selector {
  margin: 0 1rem 1rem 1rem;
  padding: 0;
}

.formation-selector h4 {
  color: #ce93d8;
  margin: 0 0 0.75rem 0;
  font-size: 0.85rem;
}

.formation-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.5rem;
}

.formation-option {
  background: var(--bg-darkest, #0a1212);
  border: 1px solid var(--ds-border-color, #3a3a3a);
  border-radius: 6px;
  padding: 0.6rem;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.formation-option:hover {
  border-color: rgba(206, 147, 216, 0.5);
  background: rgba(206, 147, 216, 0.05);
}

.formation-option.selected {
  border-color: #ce93d8;
  background: rgba(206, 147, 216, 0.15);
  box-shadow: 0 0 10px rgba(206, 147, 216, 0.2);
}

.formation-option .formation-name {
  font-weight: 700;
  font-size: 0.85rem;
  color: var(--text-primary, #f5f5f0);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.formation-option.selected .formation-name {
  color: #ce93d8;
}

.formation-option .formation-desc {
  font-size: 0.7rem;
  color: var(--text-secondary, #b8b8b0);
  line-height: 1.3;
  font-style: italic;
}

.formation-option .formation-benefits {
  list-style: none;
  padding: 0;
  margin: 0.25rem 0 0 0;
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
}

.formation-option .formation-benefits li {
  font-size: 0.65rem;
  color: var(--accent-primary, #4de8b2);
  padding-left: 0.75rem;
  position: relative;
}

.formation-option .formation-benefits li::before {
  content: '•';
  position: absolute;
  left: 0;
  color: var(--accent-primary, #4de8b2);
}

.formation-option.selected .formation-benefits li {
  color: #ce93d8;
}

.formation-option.selected .formation-benefits li::before {
  color: #ce93d8;
}

@media (max-width: 600px) {
  .formation-options {
    grid-template-columns: 1fr;
  }
}

/* ============================================
   HOVER EFFECTS
   ============================================ */

.details-section {
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.ancestry-section:hover {
  border-color: rgba(240, 198, 116, 0.4);
  box-shadow: 0 0 15px rgba(240, 198, 116, 0.1);
}

.culture-section:hover {
  border-color: rgba(186, 104, 200, 0.4);
  box-shadow: 0 0 15px rgba(186, 104, 200, 0.1);
}

.career-section:hover {
  border-color: rgba(255, 183, 77, 0.4);
  box-shadow: 0 0 15px rgba(255, 183, 77, 0.1);
}

.skills-section:hover {
  border-color: rgba(77, 232, 178, 0.4);
  box-shadow: 0 0 15px rgba(77, 232, 178, 0.1);
}

.kit-section:hover {
  border-color: rgba(144, 202, 249, 0.4);
  box-shadow: 0 0 15px rgba(144, 202, 249, 0.1);
}

.circle-section:hover {
  border-color: rgba(206, 147, 216, 0.4);
  box-shadow: 0 0 15px rgba(206, 147, 216, 0.1);
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 900px) {
  .character-details-view {
    grid-template-columns: 1fr;
  }

  .skills-languages-grid {
    grid-template-columns: 1fr;
  }

  /* Culture: 3 columns → 1 column */
  .culture-details {
    grid-template-columns: 1fr;
  }

  /* Kit stats: 4 columns → 2 columns */
  .kit-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  :root {
    --ds-chevron-width: 20px;
    --ds-chevron-depth: 8px;
  }

  .details-section h2 {
    font-size: 0.8rem;
    padding: 0.5rem 0.75rem;
    padding-bottom: calc(0.5rem + var(--ds-chevron-depth));
  }

  .ancestry-stats {
    flex-direction: column;
    gap: 0.4rem;
  }

  .career-details {
    flex-direction: column;
  }

  /* Culture: Reduce padding on mobile */
  .culture-aspect {
    padding: 0.5rem;
  }

  .culture-aspect h4 {
    margin-bottom: 0.25rem;
    font-size: 0.75rem;
  }

  .culture-aspect p {
    font-size: 0.75rem;
  }

  /* Kit: Reduce padding on mobile */
  .kit-stat {
    padding: 0.4rem 0.2rem;
  }

  .kit-stat strong {
    font-size: 0.55rem;
  }

  .kit-stat .stat-value {
    font-size: 0.8rem;
  }

  /* Equipment: Stack vertically on small screens */
  .equipment-block {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;
  }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .details-section {
    box-shadow: none !important;
    border: 1px solid #333;
  }

  .details-section h2::after {
    display: none;
  }

  .details-section h2::before {
    display: none;
  }

  .details-section h2 {
    padding-bottom: 0.6rem;
    border-bottom: 1px solid #333;
  }

  .details-section:hover {
    border-color: #333;
    box-shadow: none;
  }
}
